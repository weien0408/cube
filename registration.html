<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å ±åè¡¨å–® - é­”æ–¹æŒ‘æˆ°è³½</title>

    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
            line-height: 1.6;
        }

        header {
            background-color: #007bff;
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            margin: 0 0 5px 0;
        }

        main {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        /* è¡¨å–®æ¨£å¼ */
        form fieldset {
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        form legend {
            font-weight: bold;
            color: #007bff;
            padding: 0 10px;
        }

        form label {
            display: block;
            margin-top: 10px;
            font-weight: 500;
        }

        form input[type="text"],
        form input[type="email"] {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* ç¢ºä¿ padding ä¸æœƒæ’å¤§å¯¬åº¦ */
        }

        .total-display {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
            color: #dc3545;
        }

        #submitBtn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s;
        }

        #submitBtn:hover {
            background-color: #0056b3;
        }

        footer {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            color: #777;
            font-size: 0.9em;
        }
    </style>
    </head>
<body>
    <header>
        <h1>ğŸ“ å ±ååƒè³½</h1>
        <p>è«‹å¡«å¯«æ‚¨çš„è³‡æ–™ä¸¦é¸æ“‡åƒè³½é …ç›®ã€‚</p>
    </header>
    
    <main>
        <form id="registrationForm" action="YOUR_FORMSPREE_ENDPOINT" method="POST"> 
            
            <fieldset>
                <legend>å€‹äººè³‡æ–™</legend>
                <label for="name">é¸æ‰‹å§“å (å¿…å¡«):</label>
                <input type="text" id="name" name="name" required>
                
                <label for="email">é›»å­éƒµä»¶ (å¿…å¡«):</label>
                <input type="email" id="email" name="email" required>
                
                <label for="wcaId">WCA ID (é¸å¡«):</label>
                <input type="text" id="wcaId" name="wcaId" placeholder="è‹¥ç„¡å¯ä¸å¡«">
            </fieldset>

            <fieldset>
                <legend>é¸æ“‡åƒè³½é …ç›® (è‡³å°‘ä¸€é …)</legend>
                <input type="checkbox" id="event3x3" name="events[]" value="3x3x3" required>
                <label for="event3x3">ä¸‰éšé­”è¡“æ–¹å¡Š (NT$ 300)</label><br>
                
                <input type="checkbox" id="event2x2" name="events[]" value="2x2x2">
                <label for="event2x2">äºŒéšé­”è¡“æ–¹å¡Š (NT$ 50)</label><br>
                
                <input type="checkbox" id="event4x4" name="events[]" value="4x4x4">
                <label for="event4x4">å››éšé­”è¡“æ–¹å¡Š (NT$ 50)</label><br>
                
                <p class="total-display">é è¨ˆç¸½è²»ç”¨ï¼š<span id="totalFee">NT$ 300</span></p>
            </fieldset>

            <fieldset>
                <label for="agree">
                    <input type="checkbox" id="agree" name="agree" required>
                    æˆ‘å·²é–±è®€ä¸¦åŒæ„æ‰€æœ‰æ¯”è³½è¦å‰‡ã€‚
                </label>
            </fieldset>
            
            <button type="submit" id="submitBtn">æäº¤å ±å & é€²è¡Œæ”¯ä»˜</button>
            <p id="errorMsg" style="color: red;"></p>
        </form>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registrationForm');
            const checkboxes = form.querySelectorAll('input[name="events[]"]'); // æ³¨æ„ name æ”¹ç‚º events[]
            const totalFeeSpan = document.getElementById('totalFee');
            const errorMsg = document.getElementById('errorMsg');
            
            // å®šç¾©å„é …ç›®è²»ç”¨
            const eventFees = {
                '3x3x3': 300, // å¿…é¸ï¼Œä½œç‚ºåŸºç¤è²»ç”¨
                '2x2x2': 50,
                '4x4x4': 50
            };

            // è²»ç”¨è¨ˆç®—é‚è¼¯
            function calculateTotalFee() {
                let total = 0;
                let is3x3Checked = false;

                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        total += eventFees[checkbox.value] || 0;
                        if (checkbox.value === '3x3x3') {
                            is3x3Checked = true;
                        }
                    }
                });

                // ç¢ºä¿åŸºç¤è²»ç”¨ 300 å§‹çµ‚è¢«è¨ˆå…¥ (å› ç‚º 3x3x3 æ˜¯å¿…é¸)
                if (!is3x3Checked) {
                    // å¦‚æœç”¨æˆ¶åœ¨ JS é‹è¡Œå‰å–æ¶ˆäº† 3x3x3 çš„å‹¾é¸ï¼Œé€™è£¡æœƒå‡ºéŒ¯ï¼Œä½†æˆ‘å€‘åœ¨ HTML ä¸­å·²å°‡å…¶è¨­å®šç‚º requiredã€‚
                    // ç‚ºäº†é‚è¼¯å¥å…¨ï¼Œæˆ‘å€‘å‡è¨­ç”¨æˆ¶è‡³å°‘æœƒé¸ä¸€å€‹ï¼Œä¸” 3x3x3 æ˜¯åŸºç¤è²»ã€‚
                    // é€™è£¡çš„é‚è¼¯æ˜¯ç´¯åŠ æ‰€æœ‰é¸ä¸­çš„è²»ç”¨ã€‚
                }

                totalFeeSpan.textContent = `NT$ ${total}`;
                return total;
            }

            // ç›£è½ checkbox è®ŠåŒ–
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', calculateTotalFee);
            });
            
            // è®“ 3x3x3 é è¨­ç‚ºå·²å‹¾é¸ä¸”ä¸å¯å–æ¶ˆ (å› ç‚ºå®ƒæ˜¯åŸºç¤è²»)
            const event3x3Checkbox = document.getElementById('event3x3');
            event3x3Checkbox.checked = true; // é è¨­å‹¾é¸
            
            // è¡¨å–®æäº¤é©—è­‰
            form.addEventListener('submit', function(e) {
                errorMsg.textContent = ''; // æ¸…é™¤èˆŠéŒ¯èª¤

                // 1. ç¢ºä¿ 3x3x3 æ˜¯è¢«é¸ä¸­çš„
                if (!document.getElementById('event3x3').checked) {
                    errorMsg.textContent = 'éŒ¯èª¤ï¼šä¸‰éšé­”è¡“æ–¹å¡Šç‚ºå¿…é¸é …ç›®ã€‚';
                    e.preventDefault();
                    return;
                }

                // 2. æª¢æŸ¥æ˜¯å¦åŒæ„è¦å‰‡
                if (!document.getElementById('agree').checked) {
                     errorMsg.textContent = 'éŒ¯èª¤ï¼šè«‹å‹¾é¸åŒæ„æ¯”è³½è¦å‰‡ã€‚';
                     e.preventDefault();
                     return;
                }
                
                // æäº¤å‰çš„æé†’
                const total = calculateTotalFee();
                
                // ç”±æ–¼æ‚¨è¦ä½¿ç”¨å¤–éƒ¨æœå‹™ï¼Œé€™è£¡å°‡å…è¨±è¡¨å–®æäº¤åˆ° action æŒ‡å®šçš„ç«¯é»ã€‚
                alert(`å ±åè³‡æ–™å·²æº–å‚™å¥½ã€‚æ‡‰ä»˜ç¸½é‡‘é¡ï¼šNT$ ${total}ã€‚è³‡æ–™å°‡ç™¼é€åˆ°å¾Œç«¯/å¤–éƒ¨æœå‹™ã€‚`);
                
                // æ³¨æ„ï¼šå¦‚æœä½¿ç”¨ Formspreeï¼Œaction="YOUR_FORMSPREE_ENDPOINT" éœ€è¦è¨­å®šæ­£ç¢ºã€‚
                // æˆåŠŸç™¼é€å¾Œï¼ŒFormspree æœƒå°‡ç”¨æˆ¶å°å‘åˆ°ä¸€å€‹é è¨­çš„ç¢ºèªé é¢ã€‚
            });
            
            // åˆå§‹è¨ˆç®—è²»ç”¨
            calculateTotalFee(); 
        });
    </script>
    </body>
</html>
